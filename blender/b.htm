<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>部屋内で選択できるオブジェクト</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>
    <a-scene
      vr-mode-ui="enabled: true"
      cursor="rayOrigin: mouse"    <!-- マウスクリック対応 -->
      raycaster="objects: .clickable"
    >

      <!-- Blenderで作った部屋 -->
      <a-entity gltf-model="heya.glb" position="0 0.5 1" scale="1.2 1.2 1.2"></a-entity>

      <!-- 色が変わる箱 -->
      <a-box
		  id="box1"
		  class="clickable"
		  position="-1.2 0.8 1"
		  depth="0.1"
		  height="0.1"
		  width="0.1"
		  color="red"
		></a-box>
		
		<a-box
        id="box2"
        class="clickable"
        position="-0.3 0.7 1.3"
        depth="0.1"
        height="0.1"
        width="0.1"
        color="blue"
      ></a-box>
      
      <a-box
        id="box3"
        class="clickable"
        position="-0.3 0.7 0.8"
        depth="0.1"
        height="0.1"
        width="0.1"
        color="orange"
      ></a-box>

      <!-- カメラとコントローラー -->
      <a-entity camera look-controls wasd-controls position="0 1.6 2"></a-entity>
      <a-entity laser-controls="hand: right"></a-entity>
      <a-entity laser-controls="hand: left"></a-entity>
      <a-entity id="ctlR" laser-controls="hand: right" raycaster="lineColor: red;"></a-entity>
    </a-scene>

    <script>
      // jQueryでクリック時の色変更
      $('#box1').on('click', function () {
        const currentColor = $(this).attr('color');
        const newColor = currentColor === 'red' ? 'yellow' : 'red';
        $(this).attr('color', newColor);
      });
      
      $('#box2').on('click', function () {
        const color = $(this).attr('color') === 'blue' ? 'green' : 'blue';
        $(this).attr('color', color);
      });
      
      $('#box3').on('click', function () {
        const color = $(this).attr('color') === 'orange' ? 'pink' : 'orange';
        $(this).attr('color', color);
      });
    </script>
  </body>
</html>